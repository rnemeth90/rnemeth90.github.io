<!doctype html><html lang=en><head><title>Capturing Live Network Traffic from a Kubernetes Pod · GeekyRyan</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Ryan Nemeth"><meta name=description content="
  Capturing Live Network Traffic from a Kubernetes Pod
  
    
    Link to heading
  

Occasionally, you need to troubleshoot network behavior inside a Kubernetes pod — maybe you&rsquo;re chasing a DNS issue, testing service connectivity, or inspecting strange application traffic. tcpdump is still one of the best tools for this, but pods are intentionally minimal, and most containers won&rsquo;t have it installed.
This post shows a quick and dirty way to run a live packet capture from inside a pod, without modifying your application container image."><meta name=keywords content="blog,developer,personal,devops"><meta name=twitter:card content="summary"><meta name=twitter:title content="Capturing Live Network Traffic from a Kubernetes Pod"><meta name=twitter:description content="Capturing Live Network Traffic from a Kubernetes Pod Link to heading Occasionally, you need to troubleshoot network behavior inside a Kubernetes pod — maybe you’re chasing a DNS issue, testing service connectivity, or inspecting strange application traffic. tcpdump is still one of the best tools for this, but pods are intentionally minimal, and most containers won’t have it installed.
This post shows a quick and dirty way to run a live packet capture from inside a pod, without modifying your application container image."><meta property="og:url" content="https://rnemeth90.github.io/posts/2025-12-08-pcap-pod/"><meta property="og:site_name" content="GeekyRyan"><meta property="og:title" content="Capturing Live Network Traffic from a Kubernetes Pod"><meta property="og:description" content="Capturing Live Network Traffic from a Kubernetes Pod Link to heading Occasionally, you need to troubleshoot network behavior inside a Kubernetes pod — maybe you’re chasing a DNS issue, testing service connectivity, or inspecting strange application traffic. tcpdump is still one of the best tools for this, but pods are intentionally minimal, and most containers won’t have it installed.
This post shows a quick and dirty way to run a live packet capture from inside a pod, without modifying your application container image."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-11-26T17:00:00+00:00"><meta property="article:modified_time" content="2025-11-26T17:00:00+00:00"><link rel=canonical href=https://rnemeth90.github.io/posts/2025-12-08-pcap-pod/><link rel=preload href=/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.f8ac2fdd0cb7e56145845d949b5c036d40cd5061c013fd446f2f54a63ade62e8.css integrity="sha256-+Kwv3Qy35WFFhF2Um1wDbUDNUGHAE/1Eby9UpjreYug=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/images/favicon.svg sizes=any><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://rnemeth90.github.io/>GeekyRyan
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=/til/>TIL</a></li><li class=navigation-item><a class=navigation-link href=/projects/>Projects</a></li><li class=navigation-item><a class=navigation-link href=/tags/>Tags</a></li><li class=navigation-item><a class=navigation-link href=/notes/>Notes</a></li><li class=navigation-item><a class=navigation-link href=/htb/>HTB</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://rnemeth90.github.io/posts/2025-12-08-pcap-pod/>Capturing Live Network Traffic from a Kubernetes Pod</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa-solid fa-calendar" aria-hidden=true></i>
<time datetime=2025-11-26T17:00:00Z>2025-11-26
</time></span><span class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>
2-minute read</span></div><div class=categories><i class="fa-solid fa-folder" aria-hidden=true></i>
<a href=/categories/kubernetes/>Kubernetes</a>
<span class=separator>•</span>
<a href=/categories/networking/>Networking</a>
<span class=separator>•</span>
<a href=/categories/troubleshooting/>Troubleshooting</a>
<span class=separator>•</span>
<a href=/categories/devops/>DevOps</a></div></div></header><div class=post-content><h1 id=capturing-live-network-traffic-from-a-kubernetes-pod>Capturing Live Network Traffic from a Kubernetes Pod
<a class=heading-link href=#capturing-live-network-traffic-from-a-kubernetes-pod><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h1><p>Occasionally, you need to troubleshoot network behavior <em>inside</em> a Kubernetes pod — maybe you&rsquo;re chasing a DNS issue, testing service connectivity, or inspecting strange application traffic. <code>tcpdump</code> is still one of the best tools for this, but pods are intentionally minimal, and most containers won&rsquo;t have it installed.</p><p>This post shows a quick and dirty way to run a live packet capture <strong>from inside a pod</strong>, without modifying your application container image.</p><hr><h2 id=running-an-ephemeral-container-with-tcpdump>Running an Ephemeral Container with <code>tcpdump</code>
<a class=heading-link href=#running-an-ephemeral-container-with-tcpdump><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>Kubernetes supports <strong>ephemeral containers</strong>, which lets you temporarily attach a debugging container to a running pod. This works even if the pod’s existing containers were started without shell utilities.</p><p>To capture traffic, we inject a debugging container based on an image that already includes <code>tcpdump</code>.</p><h3 id=1-add-an-ephemeral-debugging-container>1. Add an ephemeral debugging container
<a class=heading-link href=#1-add-an-ephemeral-debugging-container><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl debug -it &lt;POD_NAME&gt; -n &lt;NAMESPACE&gt; --image<span class=o>=</span>nicolaka/netshoot --target<span class=o>=</span>&lt;CONTAINER_NAME&gt;
</span></span></code></pre></div><p>Explanation:</p><ul><li><code>--image=nicolaka/netshoot</code> — netshoot includes tcpdump and other debugging tools</li><li><code>--target</code> — attaches to the existing container’s namespaces</li><li><code>-it</code> — gives you an interactive shell</li></ul><p>Once attached, you’re inside a shell with all the networking tools you need.</p><hr><h2 id=capturing-packets>Capturing Packets
<a class=heading-link href=#capturing-packets><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><h3 id=list-network-interfaces>List network interfaces
<a class=heading-link href=#list-network-interfaces><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ip a
</span></span></code></pre></div><p>Pick the interface you want to inspect. For most pods, this is <code>eth0</code>.</p><h3 id=run-a-live-tcpdump-capture>Run a live tcpdump capture
<a class=heading-link href=#run-a-live-tcpdump-capture><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>tcpdump -i eth0 -vvv
</span></span></code></pre></div><p>Examples:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>tcpdump -i eth0 port <span class=m>53</span>
</span></span><span class=line><span class=cl>tcpdump -i eth0 host 10.0.0.5
</span></span><span class=line><span class=cl>tcpdump -i any -nn
</span></span></code></pre></div><p>Save to a file:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>tcpdump -i eth0 -w /tmp/capture.pcap
</span></span></code></pre></div><p>Download it:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl cp &lt;NAMESPACE&gt;/&lt;POD_NAME&gt;:/tmp/capture.pcap ./capture.pcap
</span></span></code></pre></div><hr><h2 id=tips-for-accurate-debugging>Tips for Accurate Debugging
<a class=heading-link href=#tips-for-accurate-debugging><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li>Ephemeral containers <strong>share the network namespace</strong> with your application container</li><li>If a pod has multiple containers, specify <code>--target=&lt;CONTAINER></code></li><li><code>nicolaka/netshoot</code> is a solid all-purpose troubleshooting image</li></ul><hr><h2 id=summary>Summary
<a class=heading-link href=#summary><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>Ephemeral containers are an often-overlooked solution, ideal for debugging:</p><ul><li>DNS</li><li>inter-service connectivity</li><li>latency or packet drops</li><li>unusual traffic patterns</li></ul></div><footer></footer></article></section></div><footer class=footer><section class=container>©
2012 -
2025
Ryan Nemeth
·
Powered by <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/ target=_blank rel=noopener>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script></body></html>