<!doctype html><html lang=en><head><title>Azure Site Recovery &amp;#8211; VMware-to-Azure: Wrong IP address discovered for VM · GeekyRyan</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Ryan Nemeth"><meta name=description content="When replicating virtual machines from VMware to Azure using Site Recovery, you may encounter an issue where the Configuration server discovers the wrong IP address for a VM. This can be caused by stale entries within the infrastructurevms MySQL table that is used by ASR to track VM attributes.
To resolve this issue, you first need to disable replication for the VM in the Azure Portal.

Next, login to your ASR Configuration Server and open a CMD prompt as administrator. Browse to the bin directory for your ASR installation. For example, in my case ASR is installed on the E: partition under the following directory:"><meta name=keywords content="blog,developer,personal,devops"><meta name=twitter:card content="summary"><meta name=twitter:title content="Azure Site Recovery &#8211; VMware-to-Azure: Wrong IP address discovered for VM"><meta name=twitter:description content="When replicating virtual machines from VMware to Azure using Site Recovery, you may encounter an issue where the Configuration server discovers the wrong IP address for a VM. This can be caused by stale entries within the infrastructurevms MySQL table that is used by ASR to track VM attributes.
To resolve this issue, you first need to disable replication for the VM in the Azure Portal.
Next, login to your ASR Configuration Server and open a CMD prompt as administrator. Browse to the bin directory for your ASR installation. For example, in my case ASR is installed on the E: partition under the following directory:"><meta property="og:url" content="https://rnemeth90.github.io/posts/2018-08-21-azure-site-recovery-vmware-to-azure/"><meta property="og:site_name" content="GeekyRyan"><meta property="og:title" content="Azure Site Recovery &#8211; VMware-to-Azure: Wrong IP address discovered for VM"><meta property="og:description" content="When replicating virtual machines from VMware to Azure using Site Recovery, you may encounter an issue where the Configuration server discovers the wrong IP address for a VM. This can be caused by stale entries within the infrastructurevms MySQL table that is used by ASR to track VM attributes.
To resolve this issue, you first need to disable replication for the VM in the Azure Portal.
Next, login to your ASR Configuration Server and open a CMD prompt as administrator. Browse to the bin directory for your ASR installation. For example, in my case ASR is installed on the E: partition under the following directory:"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-08-21T17:26:00+00:00"><meta property="article:modified_time" content="2018-08-21T17:26:00+00:00"><meta property="article:tag" content="Azure"><meta property="article:tag" content="Vmware"><link rel=canonical href=https://rnemeth90.github.io/posts/2018-08-21-azure-site-recovery-vmware-to-azure/><link rel=preload href=/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.ed30115a76cdaa62f2229e973d5b1c89b2d3dd4b1d9c07a729baad06aa3b0cbe.css integrity="sha256-7TARWnbNqmLyIp6XPVscibLT3UsdnAenKbqtBqo7DL4=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/images/favicon.svg sizes=any><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://rnemeth90.github.io/>GeekyRyan
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=/til/>TIL</a></li><li class=navigation-item><a class=navigation-link href=/projects/>Projects</a></li><li class=navigation-item><a class=navigation-link href=/tags/>Tags</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://rnemeth90.github.io/posts/2018-08-21-azure-site-recovery-vmware-to-azure/>Azure Site Recovery &amp;#8211; VMware-to-Azure: Wrong IP address discovered for VM</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa-solid fa-calendar" aria-hidden=true></i>
<time datetime=2018-08-21T17:26:00Z>2018-08-21
</time></span><span class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>
One-minute read</span></div><div class=categories><i class="fa-solid fa-folder" aria-hidden=true></i>
<a href=/categories/uncategorized/>Uncategorized</a></div><div class=tags><i class="fa-solid fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/azure/>Azure</a>
</span><span class=separator>•</span>
<span class=tag><a href=/tags/vmware/>Vmware</a></span></div></div></header><div class=post-content><p>When replicating virtual machines from VMware to Azure using Site Recovery, you may encounter an issue where the Configuration server discovers the wrong IP address for a VM. This can be caused by stale entries within the infrastructurevms MySQL table that is used by ASR to track VM attributes.</p><p>To resolve this issue, you first need to disable replication for the VM in the Azure Portal.</p><p><a href=https://rnemeth90.github.io/wp-content/uploads/2018/08/2018-08-21_13h20_26.png class=external-link target=_blank rel=noopener><img src=https://rnemeth90.github.io/wp-content/uploads/2018/08/2018-08-21_13h20_26.png alt></a></p><p>Next, login to your ASR Configuration Server and open a CMD prompt as administrator. Browse to the bin directory for your ASR installation. For example, in my case ASR is installed on the E: partition under the following directory:</p><p>E:\Program Files (x86)Microsoft Azure Site Recoveryhomesvsystemsbin</p><p>Type in this command to remove the VM from the ASR database (replace IP address with the IP of your VM):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=n>perl</span> <span class=n>Unregister</span><span class=o>-</span><span class=n>ASRComponent</span><span class=o>.</span><span class=n>pl</span> <span class=o>-</span><span class=n>IPAddress</span> <span class=mf>10.0.0.4</span> <span class=o>-</span><span class=n>Component</span> <span class=n>Source</span>
</span></span></code></pre></div><p>That’s it. You should now be able to reconfigure replication for the VM, and ASR will discover the correct info about the VM.</p></div><footer></footer></article></section></div><footer class=footer><section class=container>©
2012 -
2025
Ryan Nemeth
·
Powered by <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/ target=_blank rel=noopener>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script></body></html>